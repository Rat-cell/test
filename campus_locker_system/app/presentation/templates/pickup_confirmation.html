{% extends "base.html" %}

{% block title %}Pickup Confirmation - Campus Locker System{% endblock %}

{% block header_title %}✅ Pickup Successful{% endblock %}

{% block content %}
<div class="card">
    <div class="text-center mb-6">
        <div style="font-size: 60px; color: var(--success-color); margin-bottom: 1rem;">✅</div>
        <h1 style="color: var(--success-color); margin-bottom: 0.5rem;">Pickup Successful!</h1>
        <p>Your parcel has been collected</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert--{{ category }} mb-4">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="alert alert--success mb-6">
        <h3 style="margin-bottom: 1rem;">📦 Pickup Details</h3>
        <div style="margin-bottom: 0.75rem;">
            <strong>📦 Collected from:</strong> Locker #{{ parcel.locker_id }}
        </div>
        <div style="margin-bottom: 0.75rem;">
            <strong>📧 Recipient:</strong> {{ parcel.recipient_email }}
        </div>
        <div style="margin-bottom: 0;">
            <strong>📅 Collected at:</strong> {{ parcel.picked_up_at.strftime('%Y-%m-%d %H:%M:%S') if parcel.picked_up_at else 'Just now' }}
        </div>
    </div>

    <div class="alert alert--info mb-6">
        <h3 style="margin-bottom: 1rem;">✅ Important Notes</h3>
        <ul style="margin: 0; padding-left: 1.5rem;">
            <li>Please ensure you've collected all items from the locker</li>
            <li>The locker door has been secured automatically</li>
            <li>Your pickup has been logged for security purposes</li>
            <li>Thank you for using the Campus Locker System!</li>
        </ul>
    </div>

    <div class="flex flex-col gap-4 mb-6">
        <a href="/deposit" class="btn btn--primary btn--large">
            📦 Deposit a Parcel
        </a>
        <a href="/" class="btn btn--secondary btn--large">
            🏠 Back to Home
        </a>
    </div>

    <!-- Missing parcel report section -->
    <div class="alert alert--warning">
        <h3 style="margin-bottom: 1rem;">⚠️ Missing Items?</h3>
        <p style="margin-bottom: 1rem;">If your parcel was missing or damaged, please report it immediately for investigation.</p>
        
        <form method="POST" action="/report-missing/{{ parcel.id }}" style="margin-top: 1rem;">
            <button type="submit" class="btn btn--warning">
                📋 Report Missing/Damaged Parcel
            </button>
        </form>
    </div>
</div>
{% endblock %}
