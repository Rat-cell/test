{% extends "base.html" %}

{% block title %}Deposit Confirmation - Campus Locker System{% endblock %}

{% block header_title %}✅ Deposit Successful{% endblock %}

{% block content %}
<div class="card">
    <div class="text-center mb-6">
        <div style="font-size: 60px; color: var(--success-color); margin-bottom: 1rem;">✅</div>
        <h1 style="color: var(--success-color); margin-bottom: 0.5rem;">Deposit Successful!</h1>
        <p>Your parcel has been securely stored</p>
    </div>

    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        {% for category, message in messages %}
          <div class="alert alert--{{ category }} mb-4">
            {{ message }}
          </div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    <div class="alert alert--success mb-6">
        <h3 style="margin-bottom: 1rem;">📦 Parcel Details</h3>
        <div style="margin-bottom: 0.75rem;">
            <strong>📦 Parcel placed in:</strong> Locker #{{ parcel.locker_id }}
        </div>
        <div style="margin-bottom: 0.75rem;">
            <strong>📧 Recipient notified:</strong> {{ parcel.recipient_email }}
        </div>
        <div style="margin-bottom: 0;">
            <strong>📅 Deposited at:</strong> {{ parcel.deposited_at.strftime('%Y-%m-%d %H:%M:%S') if parcel.deposited_at else 'Just now' }}
        </div>
    </div>

    <div class="alert alert--info mb-6">
        <h3 style="margin-bottom: 1rem;">📋 What happens next?</h3>
        <ol style="margin: 0; padding-left: 1.5rem;">
            <li><strong>{{ parcel.recipient_email }}</strong> will receive an email notification</li>
            <li>The recipient can generate a secure PIN when ready to collect</li>
            <li>They'll use the PIN to access <strong>Locker #{{ parcel.locker_id }}</strong></li>
        </ol>
    </div>

    <div class="flex flex-col gap-4">
        <a href="/deposit" class="btn btn--primary btn--large">
            📦 Deposit Another Parcel
        </a>
        <a href="/pickup" class="btn btn--success btn--large">
            🔑 Pick Up a Parcel
        </a>
        <a href="/" class="btn btn--secondary btn--large">
            🏠 Back to Home
        </a>
    </div>

    <div class="alert alert--warning mt-6">
        <h3>📞 Need Support?</h3>
        <p style="margin: 0;">If you or the recipient need assistance, please contact the Campus Locker System support team at <strong>{{ config.get('ADMIN_EMAIL', 'admin@campus.edu') }}</strong> with reference to <strong>Locker #{{ parcel.locker_id }}</strong>.</p>
    </div>
</div>
{% endblock %}
