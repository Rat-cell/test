{% extends "base.html" %}

{% block title %}PIN Generation Error - Campus Locker System{% endblock %}

{% block header_title %}❌ PIN Generation Failed{% endblock %}

{% block navigation %}
<!-- No navigation for PIN generation error page -->
{% endblock %}

{% block content %}
<div class="card">
    <div class="text-center mb-6">
        <div style="font-size: 60px; color: var(--error-color); margin-bottom: 1rem;">❌</div>
        <h1 style="color: var(--error-color); margin-bottom: 0.5rem;">PIN Generation Failed</h1>
        <p>We couldn't generate your PIN at this time</p>
    </div>
        
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <ul class="flashes">
        {% for category, message in messages %}
          <li class="{{ category }}">{{ message }}</li>
        {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}
    
    <div class="alert alert--error mb-6">
        <h3>⚠️ Error Details</h3>
        <p style="margin: 0;">{{ error_message }}</p>
    </div>
    
    <div class="alert alert--info mb-6">
        <h3>💡 What you can do</h3>
        <ul style="margin: 0; padding-left: 1.5rem;">
            <li><strong>Expired Link:</strong> If your link has expired, contact support or check if you received a newer email with a fresh link</li>
            <li><strong>Rate Limit:</strong> If you've reached the daily limit (3 PINs per day), please try again tomorrow</li>
            <li><strong>Invalid Token:</strong> The link may be corrupted or already used. Check your email for the most recent link</li>
            <li><strong>Parcel Status:</strong> Your parcel may have already been picked up or is no longer available</li>
        </ul>
    </div>
    
    <div class="alert alert--warning mb-6">
        <h3>🆘 Need Help?</h3>
        <p style="margin-bottom: 1rem;">If you continue to experience issues:</p>
        <ul style="margin: 0; padding-left: 1.5rem;">
            <li>Check your email for the most recent PIN generation link</li>
            <li>Contact support with your parcel details</li>
            <li>Visit the pickup location for assistance</li>
        </ul>
    </div>

    <div class="flex flex-col gap-4">
        <a href="/request-new-pin" class="btn btn--primary btn--large">
            🔄 Try Requesting New PIN
        </a>
        <a href="/pickup" class="btn btn--secondary btn--large">
            🔑 Go to Pickup Page
        </a>
        <a href="/" class="btn btn--secondary btn--large">
            🏠 Back to Home
        </a>
    </div>
</div>
{% endblock %} 